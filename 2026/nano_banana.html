<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nano Banana: Interactive Prompt Reference</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Font Import */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap');

        :root {
            --bg-warm: #FEFDF5;
            --text-main: #27272A;
            --banana-accent: #FDE047;
            --banana-dark: #EAB308;
            --card-bg: #FFFFFF;
            --border-subtle: #E7E5E4;
        }

        body {
            background-color: var(--bg-warm);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Chart Container Utilities */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            height: 350px; 
            max-height: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Interactive Element Transitions */
        .nav-item {
            transition: all 0.2s ease;
        }
        .nav-item:hover, .nav-item.active {
            background-color: #FEF08A; /* yellow-200 */
            border-right: 4px solid var(--banana-dark);
            font-weight: 600;
        }

        .btn-action {
            transition: all 0.2s;
        }
        .btn-action:hover {
            transform: translateY(-2px);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #D6D3D1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #A8A29E;
        }
    </style>
</head>
<body class="h-screen overflow-hidden flex flex-col md:flex-row">

    <!-- Mobile Header -->
    <header class="md:hidden bg-white border-b border-stone-200 p-4 flex justify-between items-center z-50">
        <h1 class="text-xl font-extrabold tracking-tight text-yellow-600">üçå Nano Banana</h1>
        <button id="menu-toggle" class="text-2xl p-1 focus:outline-none">‚ò∞</button>
    </header>

    <!-- Sidebar Navigation -->
    <nav id="sidebar" class="bg-white border-r border-stone-200 w-full md:w-64 flex-shrink-0 flex flex-col h-full transform -translate-x-full md:translate-x-0 transition-transform duration-300 absolute md:relative z-40">
        <div class="p-6 hidden md:block">
            <h1 class="text-2xl font-extrabold tracking-tight text-yellow-600">üçå Nano Banana</h1>
            <p class="text-xs text-stone-500 mt-1 uppercase tracking-wider">Prompt Reference Suite</p>
        </div>

        <div class="flex-1 overflow-y-auto py-4 space-y-1">
            <button onclick="navTo('dashboard')" class="nav-item w-full text-left px-6 py-3 text-stone-600 active" data-target="dashboard">
                <span class="mr-2">üìä</span> Overview
            </button>
            <button onclick="navTo('art-styles')" class="nav-item w-full text-left px-6 py-3 text-stone-600" data-target="art-styles">
                <span class="mr-2">üé®</span> Art & Aesthetics
            </button>
            <button onclick="navTo('engineering')" class="nav-item w-full text-left px-6 py-3 text-stone-600" data-target="engineering">
                <span class="mr-2">üìê</span> Tech & Engineering
            </button>
            <button onclick="navTo('medical')" class="nav-item w-full text-left px-6 py-3 text-stone-600" data-target="medical">
                <span class="mr-2">ü©∫</span> Medical & Anatomy
            </button>
            <button onclick="navTo('photography')" class="nav-item w-full text-left px-6 py-3 text-stone-600" data-target="photography">
                <span class="mr-2">üé•</span> Photography & Film
            </button>
            <button onclick="navTo('infographics')" class="nav-item w-full text-left px-6 py-3 text-stone-600" data-target="infographics">
                <span class="mr-2">üß©</span> Infographics
            </button>
            <button onclick="navTo('builder')" class="nav-item w-full text-left px-6 py-3 text-stone-600" data-target="builder">
                <span class="mr-2">üõ†Ô∏è</span> Prompt Builder
            </button>
        </div>

        <div class="p-6 border-t border-stone-100">
            <div class="bg-yellow-50 rounded-lg p-4 mb-4">
                <p class="text-xs text-yellow-800 font-semibold mb-2">Pro Tip:</p>
                <p class="text-xs text-yellow-700 italic" id="daily-tip">"Use negative prompts to remove unwanted artifacts."</p>
            </div>
            
            <!-- Author Info -->
            <div class="text-xs text-stone-500 space-y-1">
                <p class="font-bold text-stone-700">Author</p>
                <p>Kalyanjit Hatibaruah</p>
                <p class="flex items-center gap-1">
                    <span>üì±</span> +91-9864011106
                </p>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-1 h-full overflow-y-auto relative p-4 md:p-8 scroll-smooth" id="main-content">
        <!-- Content injected via JS -->
    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- State Management ---
        const state = {
            currentView: 'dashboard',
            promptBuilder: {
                subject: '',
                style: '',
                lighting: '',
                camera: '',
                material: '',
                renderer: '',
                negative: '',
                ar: '--ar 16:9'
            }
        };

        // --- Data Store ---
        const dataStore = {
            tips: [
                "Use '::' to separate distinct concepts in some models.",
                "Lighting keywords like 'volumetric' add immense depth.",
                "For technical drawings, 'orthographic' is a magic word.",
                "Specify 'vector style' for clean, scalable-looking graphics.",
                "For medical art, use 'Frank H. Netter style' for clean anatomy."
            ],
            styles: [
                { id: 'cyberpunk', name: 'Cyberpunk', icon: 'üåÜ', desc: 'High contrast, neon, futuristic.', prompt: 'cyberpunk city, neon lights, rain-slicked streets, high contrast, futuristic architecture', metrics: [90, 20, 80, 70, 60] },
                { id: 'oil', name: 'Oil Painting', icon: 'üñºÔ∏è', desc: 'Textured, classic, rich colors.', prompt: 'oil painting, thick impasto, visible brushstrokes, classical composition, dramatic lighting', metrics: [40, 90, 60, 30, 80] },
                { id: 'pencil', name: 'Pencil Sketch', icon: '‚úèÔ∏è', desc: 'Monochrome, detailed, rough.', prompt: 'graphite sketch, rough lines, shading, monochrome, sketchbook style', metrics: [80, 10, 20, 10, 40] },
                { id: '3d', name: '3D Render', icon: 'üßä', desc: 'Clean, glossy, isometric.', prompt: '3D render, blender cycles, octane render, isometric view, soft shadows, clay material', metrics: [70, 5, 50, 90, 20] },
                { id: 'watercolor', name: 'Watercolor', icon: 'üíß', desc: 'Soft, bleeding edges, pastel.', prompt: 'watercolor painting, wet-on-wet, pastel colors, soft edges, dreamy atmosphere', metrics: [30, 60, 40, 20, 50] }
            ],
            engineering: [
                { title: 'Blueprint', keyword: 'blueprint', desc: 'Standard architectural white-on-blue.', prompt: 'architectural blueprint, technical drawing, white lines on blue background, schematic, measurements' },
                { title: 'Exploded View', keyword: 'exploded view', desc: 'Parts separated to show assembly.', prompt: 'exploded view diagram, mechanical parts, floating components, labeled, engineering schematic' },
                { title: 'Cutaway', keyword: 'cutaway', desc: 'Showing internal structure.', prompt: 'cutaway cross-section, internal engine parts, technical illustration, detailed implementation' },
                { title: 'Wireframe', keyword: 'wireframe', desc: '3D mesh structure.', prompt: 'wireframe model, polygon mesh, holographic, glowing edges, black background' }
            ],
            medical: [
                { title: 'Classic Atlas', keyword: 'Netter Style', desc: 'The gold standard for education. Clean, painted, labeled.', prompt: 'medical illustration in the style of Frank H. Netter, watercolor and ink, labeled anatomical parts, clean white background, educational' },
                { title: 'Diagnostic Imaging', keyword: 'MRI / X-Ray', desc: 'Greyscale, high contrast, internal view.', prompt: 'MRI scan, T2 weighted image, high contrast, radiologic imaging, greyscale, cross-section of brain, medical diagnosis' },
                { title: 'Microscopic (SEM)', keyword: 'Electron Microscope', desc: 'For viruses, cells, and bacteria.', prompt: 'scanning electron microscope (SEM) image, high magnification, depth of field, colorized, macro details, scientific visualization' },
                { title: 'Surgical Schematic', keyword: 'Vector Line Art', desc: 'Procedure steps without the blood.', prompt: 'surgical line art, black and white vector, technical manual style, surgical instruments, step-by-step procedure, minimal' }
            ],
            anatomy: [
                { part: 'Skeletal System', desc: 'Bones, skull, ribs, joints', prompt: 'Human skeletal system, osteology, bone structure, white bone texture' },
                { part: 'Muscular System', desc: 'Muscles, tendons, fibers', prompt: 'Human muscular system, myology, red muscle fibers, tendons, detailed anatomy' },
                { part: 'Nervous System', desc: 'Brain, nerves, spinal cord', prompt: 'Human nervous system, neural network, brain and spinal cord, glowing synapses' },
                { part: 'Circulatory System', desc: 'Heart, veins, arteries', prompt: 'Human circulatory system, heart anatomy, veins and arteries, blood vessels' },
                { part: 'Respiratory System', desc: 'Lungs, trachea, bronchi', prompt: 'Human respiratory system, lungs, bronchi, trachea, air sacs' },
                { part: 'Digestive System', desc: 'Stomach, intestines', prompt: 'Human digestive system, stomach, intestines, liver, internal organs' }
            ],
            photography: [
                { type: 'Lens', name: 'Wide Angle (16mm)', prompt: '16mm wide angle lens, fisheye effect, barrel distortion, expansive view', usage: 'Architecture, Landscapes, Dynamic Action' },
                { type: 'Lens', name: 'Portrait (85mm)', prompt: '85mm portrait lens, f/1.8, bokeh background, shallow depth of field', usage: 'Portraits, Product Photography' },
                { type: 'Lens', name: 'Macro (100mm)', prompt: '100mm macro lens, extreme close-up, highly detailed texture', usage: 'Insects, Textures, Jewelry' },
                { type: 'Film', name: 'Kodak Portra 400', prompt: 'Kodak Portra 400 film stock, fine grain, warm tones, analog photography', usage: 'Lifestyle, Nostalgic, Natural Skin Tones' },
                { type: 'Film', name: 'Cinestill 800T', prompt: 'Cinestill 800T, halation effect, red halos around lights, night photography', usage: 'Cyberpunk, Night Scenes, Neon' },
                { type: 'Angle', name: 'Dutch Angle', prompt: 'Dutch angle, tilted camera, dynamic composition, unease', usage: 'Horror, Action, Tension' },
                { type: 'Angle', name: 'Low Angle (Hero)', prompt: 'low angle shot, looking up, imposing presence, worm\'s eye view', usage: 'Superheroes, Giants, Architecture' }
            ],
            infographics: [
                { title: 'Statistical Layout', desc: 'Dashboards & Charts', prompt: 'infographic layout, flat vector design, bar charts and pie charts, minimalism, corporate color palette', style: 'digital illustration, cel shaded', renderer: 'Adobe Illustrator style' },
                { title: 'Flowchart / Process', desc: 'Timelines & Logic', prompt: 'process map, flowchart infographic, connected nodes, isometric path, step-by-step guide', style: 'low poly, isometric render', renderer: 'Unreal Engine 5 render, 8k, ray tracing' },
                { title: 'Scientific Poster', desc: 'Anatomy & Biology', prompt: 'scientific illustration, medical infographic, anatomy breakdown, detailed text labels', style: 'oil painting, thick texture', renderer: 'Pixar style, Disney animation style' }
            ]
        };

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderView('dashboard');
            setupMobileMenu();
            cycleTip();
        });

        function setupMobileMenu() {
            const btn = document.getElementById('menu-toggle');
            const sidebar = document.getElementById('sidebar');
            btn.addEventListener('click', () => {
                sidebar.classList.toggle('-translate-x-full');
            });
        }

        function cycleTip() {
            const tipEl = document.getElementById('daily-tip');
            if(!tipEl) return;
            let i = 0;
            setInterval(() => {
                i = (i + 1) % dataStore.tips.length;
                tipEl.style.opacity = 0;
                setTimeout(() => {
                    tipEl.textContent = `"${dataStore.tips[i]}"`;
                    tipEl.style.opacity = 1;
                }, 500);
            }, 8000);
        }

        // --- Navigation Logic ---
        function navTo(viewId) {
            state.currentView = viewId;
            
            // Update UI Sidebar
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
                if(el.dataset.target === viewId) el.classList.add('active');
            });

            // Mobile: Close sidebar on selection
            if(window.innerWidth < 768) {
                document.getElementById('sidebar').classList.add('-translate-x-full');
            }

            renderView(viewId);
        }

        // --- View Rendering Engine ---
        function renderView(viewId) {
            const main = document.getElementById('main-content');
            main.innerHTML = ''; // Clear current content
            main.scrollTop = 0;

            switch(viewId) {
                case 'dashboard': renderDashboard(main); break;
                case 'art-styles': renderArtStyles(main); break;
                case 'engineering': renderEngineering(main); break;
                case 'medical': renderMedical(main); break;
                case 'photography': renderPhotography(main); break;
                case 'infographics': renderInfographics(main); break;
                case 'builder': renderBuilder(main); break;
            }
        }

        // --- Section: Dashboard ---
        function renderDashboard(container) {
            const content = `
                <div class="max-w-5xl mx-auto space-y-8">
                    <div class="space-y-2">
                        <h2 class="text-3xl font-bold text-stone-800">Welcome to Nano Banana</h2>
                        <p class="text-lg text-stone-600 max-w-2xl">
                            Your comprehensive reference for generative AI imagery. Explore art styles, master technical diagrams, and build the perfect prompt structure.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Chart: Anatomy of a Prompt -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100">
                            <h3 class="text-xl font-bold mb-4">Anatomy of a Perfect Prompt</h3>
                            <p class="text-sm text-stone-500 mb-4">To achieve consistent results, balance your token usage across these categories.</p>
                            <div class="chart-container">
                                <canvas id="chart-anatomy"></canvas>
                            </div>
                        </div>

                        <!-- Info Card -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 flex flex-col justify-center space-y-4">
                            <h3 class="text-xl font-bold">Quick Start Guide</h3>
                            <ul class="space-y-3">
                                <li class="flex items-start">
                                    <span class="bg-yellow-100 text-yellow-800 p-1 rounded mr-3 text-xs font-mono">1</span>
                                    <span class="text-stone-600 text-sm">Select a category from the sidebar.</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-yellow-100 text-yellow-800 p-1 rounded mr-3 text-xs font-mono">2</span>
                                    <span class="text-stone-600 text-sm">Explore specific keywords and visual styles.</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="bg-yellow-100 text-yellow-800 p-1 rounded mr-3 text-xs font-mono">3</span>
                                    <span class="text-stone-600 text-sm">Use the "Customize in Builder" buttons.</span>
                                </li>
                            </ul>
                            <button onclick="navTo('art-styles')" class="mt-4 w-full bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-2 px-4 rounded transition">
                                Start Exploring Styles
                            </button>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = content;
            initAnatomyChart();
        }

        // --- Section: Art Styles ---
        function renderArtStyles(container) {
            const content = `
                <div class="max-w-6xl mx-auto space-y-8">
                    <div class="space-y-2 border-b border-stone-200 pb-4">
                        <h2 class="text-3xl font-bold text-stone-800">Art Styles & Aesthetics</h2>
                        <p class="text-stone-600">
                            The "Style" component of a prompt dictates the rendering engine's approach to texture, lighting, and composition. 
                            Compare the attributes below to find the right look.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Left: List -->
                        <div class="lg:col-span-1 space-y-4">
                            <h3 class="font-bold text-stone-700 uppercase tracking-wide text-sm">Style Library</h3>
                            <div class="grid gap-3" id="style-list">
                                <!-- Generated by JS -->
                            </div>
                        </div>

                        <!-- Right: Detail & Chart -->
                        <div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-stone-100 p-6 sticky top-4">
                            <div id="style-detail-view">
                                <p class="text-stone-400 italic text-center py-20">Select a style to view analysis.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = content;
            populateStyleList();
            selectStyle(dataStore.styles[0].id);
        }

        function populateStyleList() {
            const list = document.getElementById('style-list');
            if(!list) return;
            dataStore.styles.forEach(style => {
                const btn = document.createElement('button');
                btn.className = 'w-full text-left p-4 bg-white border border-stone-200 rounded-lg hover:border-yellow-400 hover:bg-yellow-50 transition flex items-center group';
                btn.onclick = () => selectStyle(style.id);
                btn.innerHTML = `
                    <span class="text-2xl mr-4 group-hover:scale-110 transition">${style.icon}</span>
                    <div>
                        <div class="font-bold text-stone-800">${style.name}</div>
                        <div class="text-xs text-stone-500">${style.desc}</div>
                    </div>
                `;
                list.appendChild(btn);
            });
        }

        function selectStyle(id) {
            const style = dataStore.styles.find(s => s.id === id);
            const view = document.getElementById('style-detail-view');
            
            view.innerHTML = `
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h3 class="text-3xl font-bold flex items-center gap-3">
                            <span>${style.icon}</span> ${style.name}
                        </h3>
                        <p class="text-stone-600 mt-2">${style.desc}</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                    <div>
                        <h4 class="font-bold text-stone-700 mb-2 text-sm">Attribute Profile</h4>
                        <div class="chart-container" style="height: 300px;">
                            <canvas id="style-radar-chart"></canvas>
                        </div>
                    </div>
                    <div class="flex flex-col justify-center space-y-4">
                        <h4 class="font-bold text-stone-700 text-sm">Core Prompt Structure</h4>
                        <div class="bg-stone-900 text-stone-100 p-4 rounded-lg font-mono text-sm leading-relaxed relative group">
                            <span id="prompt-text-${id}">${style.prompt}</span>
                            <button onclick="copyText('prompt-text-${id}')" class="absolute top-2 right-2 bg-stone-700 hover:bg-stone-600 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition">Copy</button>
                        </div>
                        <button onclick="fillBuilderWithStyle('${style.id}')" class="w-full bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-3 rounded-lg transition shadow-sm flex items-center justify-center gap-2">
                            <span>Customize in Builder</span>
                            <span class="text-lg">üõ†Ô∏è</span>
                        </button>
                        <p class="text-xs text-stone-500 text-center">
                            *Analysis: This style prioritizes <strong class="text-yellow-600">${getMaxAttribute(style.metrics)}</strong> over others.
                        </p>
                    </div>
                </div>
            `;

            initStyleChart(style);
        }

        // --- Section: Engineering ---
        function renderEngineering(container) {
            const content = `
                <div class="max-w-5xl mx-auto space-y-8">
                    <div class="space-y-2 border-b border-stone-200 pb-4">
                        <h2 class="text-3xl font-bold text-stone-800">Technical Drawing & Engineering</h2>
                        <p class="text-stone-600">
                            Generating accurate technical imagery requires precise terminology. Vague prompts lead to "hallucinated" mechanics. 
                            Use these strict keywords to enforce perspective and structure.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div class="bg-blue-50 p-6 rounded-xl border border-blue-100">
                            <h3 class="text-blue-900 font-bold mb-2">DO's</h3>
                            <ul class="list-disc list-inside text-blue-800 text-sm space-y-1">
                                <li>Use "Orthographic projection" for flat views.</li>
                                <li>Specify "White lines on blue background" for blueprints.</li>
                                <li>Add "Labeled" or "Annotated" for text placeholders.</li>
                            </ul>
                        </div>
                        <div class="bg-red-50 p-6 rounded-xl border border-red-100">
                            <h3 class="text-red-900 font-bold mb-2">DON'Ts</h3>
                            <ul class="list-disc list-inside text-red-800 text-sm space-y-1">
                                <li>Don't use "Photo realistic" (adds unwanted depth).</li>
                                <li>Avoid "Cinematic lighting" (obscures details).</li>
                                <li>Don't expect readable text (it will be gibberish).</li>
                            </ul>
                        </div>
                    </div>

                    <h3 class="font-bold text-stone-800 text-xl">Standard Engineering Views</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${dataStore.engineering.map(item => `
                            <div class="bg-white p-4 rounded-lg border border-stone-200 flex flex-col justify-between">
                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <h4 class="font-bold text-stone-800">üìê ${item.title}</h4>
                                        <span class="text-xs bg-stone-100 px-2 py-1 rounded text-stone-500 font-mono">${item.keyword}</span>
                                    </div>
                                    <p class="text-sm text-stone-600 mb-3">${item.desc}</p>
                                    <div class="bg-stone-50 p-2 rounded text-xs font-mono text-stone-500 truncate mb-3">
                                        ${item.prompt}
                                    </div>
                                </div>
                                <button onclick="fillBuilderWithTech('${item.keyword}')" class="btn-action w-full bg-blue-50 hover:bg-blue-100 text-blue-700 font-bold py-2 rounded text-sm transition">
                                    Customize in Builder üõ†Ô∏è
                                </button>
                            </div>
                        `).join('')}
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 mt-8">
                         <h3 class="font-bold text-stone-800 mb-4">Keyword Efficiency Analysis</h3>
                         <div class="chart-container">
                            <canvas id="tech-bar-chart"></canvas>
                         </div>
                    </div>
                </div>
            `;
            container.innerHTML = content;
            initTechChart();
        }

        // --- Section: Medical ---
        function renderMedical(container) {
            const content = `
                <div class="max-w-5xl mx-auto space-y-8">
                    <div class="space-y-2 border-b border-stone-200 pb-4">
                        <h2 class="text-3xl font-bold text-teal-800">Medical & Anatomical Drawing</h2>
                        <p class="text-stone-600">
                            Generating medical imagery is a balance between <strong>Accuracy</strong> and <strong>Aesthetics</strong>. 
                            Use specific anatomical terms and controlled styles to avoid "gore" filters and anatomical hallucinations.
                        </p>
                    </div>

                    <!-- Builder Strategy Guide -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-teal-100">
                        <h3 class="font-bold text-teal-900 mb-4 flex items-center gap-2">
                            <span>ü©∫</span> How to Build Medical Prompts
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
                            <div class="bg-stone-50 p-3 rounded">
                                <span class="font-bold text-stone-700 block mb-1">Subject</span>
                                <span class="text-stone-500">Use Latin names (e.g., "Cor" vs Heart) for better precision.</span>
                            </div>
                            <div class="bg-stone-50 p-3 rounded">
                                <span class="font-bold text-stone-700 block mb-1">Style</span>
                                <span class="text-stone-500">"Netter Style" for education, "Macro Photo" for texture.</span>
                            </div>
                            <div class="bg-stone-50 p-3 rounded">
                                <span class="font-bold text-stone-700 block mb-1">Lighting</span>
                                <span class="text-stone-500">"Studio lighting" or "Subsurface scattering" for skin/tissue.</span>
                            </div>
                            <div class="bg-stone-50 p-3 rounded">
                                <span class="font-bold text-stone-700 block mb-1">Material</span>
                                <span class="text-stone-500">"Organic wet tissue", "Plastination", or "Translucent".</span>
                            </div>
                        </div>
                    </div>

                    <!-- Anatomy Systems Grid -->
                    <div>
                        <h3 class="font-bold text-stone-800 mb-4 text-xl">Anatomical Systems Library</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            ${dataStore.anatomy.map(part => `
                                <div class="bg-white p-4 rounded-lg border border-stone-200 hover:border-teal-400 transition group">
                                    <h4 class="font-bold text-teal-800 mb-1">${part.part}</h4>
                                    <p class="text-xs text-stone-500 mb-3">${part.desc}</p>
                                    <button onclick="fillBuilderWithAnatomy('${part.part}')" class="btn-action w-full bg-teal-50 hover:bg-teal-100 text-teal-700 text-xs font-bold py-2 rounded transition">
                                        Build ${part.part} Prompt
                                    </button>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
                        <!-- Left: Style Cards -->
                        <div class="space-y-4">
                            <h3 class="font-bold text-stone-700">Standard Modalities</h3>
                            ${dataStore.medical.map(item => `
                                <div class="bg-white p-4 rounded-lg border border-stone-200 hover:shadow-md transition">
                                    <div class="flex justify-between items-center mb-2">
                                        <h4 class="font-bold text-stone-800 flex items-center gap-2">
                                            ${item.title}
                                        </h4>
                                    </div>
                                    <p class="text-sm text-stone-600 mb-3">${item.desc}</p>
                                    <button onclick="fillBuilderWithMedical('${item.title}')" class="btn-action w-full bg-stone-100 hover:bg-stone-200 text-stone-700 font-bold py-2 rounded text-sm transition">
                                        Use Template in Builder
                                    </button>
                                </div>
                            `).join('')}
                        </div>

                        <!-- Right: Analysis Chart -->
                        <div class="space-y-4">
                            <h3 class="font-bold text-stone-700">Style Utility Analysis</h3>
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 h-full">
                                <div class="chart-container" style="height: 300px;">
                                    <canvas id="medical-chart"></canvas>
                                </div>
                                <div class="mt-6 p-4 bg-teal-50 rounded-lg">
                                    <h4 class="text-teal-900 font-bold text-sm mb-2">üí° Quick Tip: Cross-Sections</h4>
                                    <p class="text-xs text-teal-800">
                                        To see inside an organ without gore, use the keyword <span class="font-bold">"Cutaway diagram"</span> or <span class="font-bold">"Cross-section view"</span> combined with <span class="font-bold">"3D render"</span>.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = content;
            initMedicalChart();
        }

        // --- Section: Photography ---
        function renderPhotography(container) {
            const content = `
                <div class="max-w-5xl mx-auto space-y-8">
                    <div class="space-y-2 border-b border-stone-200 pb-4">
                        <h2 class="text-3xl font-bold text-stone-900">Photography & Cinematography</h2>
                        <p class="text-stone-600">
                            Transform a generic image into a "Photograph" by specifying the virtual <strong>Lens</strong>, <strong>Film Stock</strong>, and <strong>Camera Angle</strong>. 
                            Without these, AI defaults to a flat, boring middle-distance shot.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Left: Virtual Camera Bag -->
                        <div class="lg:col-span-2 space-y-6">
                            
                            <!-- Lenses -->
                            <div>
                                <h3 class="font-bold text-stone-800 mb-3 flex items-center">
                                    <span class="bg-stone-200 text-stone-700 text-xs px-2 py-1 rounded mr-2">Step 1</span> Choose your Lens
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    ${dataStore.photography.filter(i => i.type === 'Lens').map(item => `
                                        <div class="bg-white p-4 rounded-lg border border-stone-200 hover:border-yellow-400 cursor-pointer group transition" onclick="fillBuilderWithPhoto('${item.name}')">
                                            <div class="flex justify-between">
                                                <span class="font-bold text-stone-700">${item.name}</span>
                                                <span class="text-xs text-stone-400 group-hover:text-yellow-600">Use üì∏</span>
                                            </div>
                                            <p class="text-xs text-stone-500 mt-1">${item.usage}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- Film Stocks -->
                            <div>
                                <h3 class="font-bold text-stone-800 mb-3 flex items-center">
                                    <span class="bg-stone-200 text-stone-700 text-xs px-2 py-1 rounded mr-2">Step 2</span> Load Film Stock
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    ${dataStore.photography.filter(i => i.type === 'Film').map(item => `
                                        <div class="bg-white p-4 rounded-lg border border-stone-200 hover:border-red-400 cursor-pointer group transition" onclick="fillBuilderWithPhoto('${item.name}')">
                                            <div class="flex justify-between">
                                                <span class="font-bold text-stone-700">${item.name}</span>
                                                <span class="text-xs text-stone-400 group-hover:text-red-600">Use üéûÔ∏è</span>
                                            </div>
                                            <p class="text-xs text-stone-500 mt-1">${item.usage}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            <!-- Angles -->
                            <div>
                                <h3 class="font-bold text-stone-800 mb-3 flex items-center">
                                    <span class="bg-stone-200 text-stone-700 text-xs px-2 py-1 rounded mr-2">Step 3</span> Frame the Shot
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                    ${dataStore.photography.filter(i => i.type === 'Angle').map(item => `
                                        <div class="bg-white p-4 rounded-lg border border-stone-200 hover:border-blue-400 cursor-pointer group transition" onclick="fillBuilderWithPhoto('${item.name}')">
                                            <div class="flex justify-between">
                                                <span class="font-bold text-stone-700">${item.name}</span>
                                                <span class="text-xs text-stone-400 group-hover:text-blue-600">Use üìê</span>
                                            </div>
                                            <p class="text-xs text-stone-500 mt-1">${item.usage}</p>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>

                        <!-- Right: Education & Chart -->
                        <div class="space-y-6">
                            <div class="bg-stone-900 text-stone-300 p-6 rounded-xl">
                                <h3 class="text-yellow-400 font-bold mb-4">Depth of Field Guide</h3>
                                <p class="text-sm mb-4">Understanding how Focal Length affects the background blur (Bokeh).</p>
                                <div class="chart-container" style="height: 250px;">
                                    <canvas id="photo-chart"></canvas>
                                </div>
                                <div class="mt-4 text-xs font-mono bg-stone-800 p-3 rounded text-stone-400">
                                    Low f-stop (f/1.8) + High mm (85mm) = <span class="text-white">Maximum Blur</span>
                                </div>
                            </div>

                            <div class="bg-yellow-50 border border-yellow-200 p-6 rounded-xl">
                                <h3 class="font-bold text-yellow-800 mb-2">Cinematic Lighting Cheat Sheet</h3>
                                <ul class="text-sm text-yellow-900 space-y-2">
                                    <li><strong>Rembrandt:</strong> Triangle of light on cheek. (Drama)</li>
                                    <li><strong>Butterfly:</strong> Shadow under nose. (Glamour)</li>
                                    <li><strong>Rim Light:</strong> Outline of light. (Separation)</li>
                                    <li><strong>Silhouette:</strong> Backlit. (Mystery)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = content;
            initPhotoChart();
        }

        // --- Section: Infographics ---
        function renderInfographics(container) {
            const content = `
                <div class="max-w-5xl mx-auto space-y-8">
                    <div class="space-y-2 border-b border-stone-200 pb-4">
                        <h2 class="text-3xl font-bold text-stone-800">Infographics & Data Viz</h2>
                        <p class="text-stone-600">
                            Creating generated infographics is about structure, not data accuracy. The AI generates the *layout*, you overlay the data later.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        ${dataStore.infographics.map((item, index) => `
                            <div class="bg-white rounded-lg shadow-sm overflow-hidden border border-stone-200 flex flex-col h-full">
                                <div class="h-32 bg-gradient-to-br from-stone-100 to-stone-50 flex items-center justify-center text-4xl">
                                    ${index === 0 ? 'üìä' : index === 1 ? 'üó∫Ô∏è' : 'üß¨'}
                                </div>
                                <div class="p-4 flex-1 flex flex-col justify-between">
                                    <div>
                                        <h3 class="font-bold text-lg">${item.title}</h3>
                                        <p class="text-sm text-stone-500 mt-1">${item.desc}</p>
                                        <hr class="my-3 border-stone-100">
                                        <p class="font-mono text-xs text-stone-600 bg-stone-50 p-2 rounded mb-4">
                                            ${item.prompt}
                                        </p>
                                    </div>
                                    <button onclick="fillBuilderWithInfo('${item.title}')" class="btn-action w-full bg-yellow-50 hover:bg-yellow-100 text-yellow-800 font-bold py-2 rounded text-sm transition">
                                        Customize in Builder üõ†Ô∏è
                                    </button>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <!-- Interactive Slider Demo -->
                    <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-8 text-center mt-8">
                        <h3 class="text-2xl font-bold text-yellow-900 mb-2">Complexity Balance</h3>
                        <p class="text-yellow-800 mb-6">Infographics get messy if the prompt is too complex. Keep stylization low.</p>
                        
                        <div class="flex items-center justify-center space-x-4">
                            <span class="text-sm font-bold text-stone-500">Minimal</span>
                            <div class="w-full max-w-md h-4 bg-yellow-200 rounded-full relative">
                                <div class="absolute top-0 left-0 h-4 bg-yellow-500 rounded-full" style="width: 30%"></div>
                                <div class="absolute -top-1 left-[30%] w-6 h-6 bg-white border-2 border-yellow-600 rounded-full cursor-pointer shadow-sm"></div>
                            </div>
                            <span class="text-sm font-bold text-stone-500">Cluttered</span>
                        </div>
                        <p class="text-xs text-stone-500 mt-4">Recommended setting: --s 50 (Low Stylization)</p>
                    </div>
                </div>
            `;
            container.innerHTML = content;
        }

        // --- Section: Builder ---
        function renderBuilder(container) {
            const content = `
                <div class="max-w-5xl mx-auto space-y-8">
                    <div class="space-y-2">
                        <h2 class="text-3xl font-bold text-stone-800">Advanced Prompt Builder</h2>
                        <p class="text-stone-600">
                            Construct a professional-grade prompt by layering dimensions, textures, and camera logic.
                        </p>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-lg border border-yellow-100 grid grid-cols-1 lg:grid-cols-12 gap-8">
                        
                        <!-- Left Column: Core Components (7 cols) -->
                        <div class="lg:col-span-7 space-y-5">
                            <h3 class="font-bold text-stone-400 text-xs uppercase tracking-wider border-b border-stone-100 pb-2">Core Visuals</h3>
                            
                            <div>
                                <label class="block text-sm font-bold text-stone-700 mb-1">Subject (The "Who")</label>
                                <input type="text" id="input-subject" class="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-yellow-400 outline-none transition" placeholder="e.g. A futuristic cyberpunk cat">
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-bold text-stone-700 mb-1">Art Style</label>
                                    <select id="input-style" class="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-yellow-400 outline-none bg-white">
                                        <option value="">Select Style...</option>
                                        <option value="cinematic shot, 35mm lens">Cinematic Photo</option>
                                        <option value="cyberpunk city, high contrast">Cyberpunk</option>
                                        <option value="oil painting, thick texture">Oil Painting</option>
                                        <option value="digital illustration, cel shaded">Digital Art</option>
                                        <option value="blueprint, white lines on blue">Blueprint</option>
                                        <option value="low poly, isometric render">Low Poly 3D</option>
                                        <option value="ukiyo-e woodblock print">Ukiyo-e Print</option>
                                        <option value="medical illustration in the style of Frank H. Netter">Netter Medical</option>
                                        <option value="flat vector design, minimalism">Flat Vector</option>
                                        <option value="watercolor painting, wet-on-wet">Watercolor</option>
                                        <option value="graphite sketch, rough lines">Pencil Sketch</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-stone-700 mb-1">Lighting</label>
                                    <select id="input-lighting" class="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-yellow-400 outline-none bg-white">
                                        <option value="">Select Lighting...</option>
                                        <option value="golden hour lighting">Golden Hour (Warm)</option>
                                        <option value="neon volumetric lighting">Neon Cyberpunk</option>
                                        <option value="soft studio lighting">Studio (Clean)</option>
                                        <option value="bioluminescent glow">Bioluminescent</option>
                                        <option value="rembrandt lighting">Rembrandt (Dramatic)</option>
                                        <option value="subsurface scattering">Subsurface (Skin)</option>
                                        <option value="natural diffuse light">Natural (Soft)</option>
                                        <option value="dramatic chiaroscuro">Chiaroscuro (Dark)</option>
                                    </select>
                                </div>
                            </div>

                            <!-- New Unique Fields Row 1 -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-bold text-stone-700 mb-1">Camera & Lens <span class="text-yellow-600 text-xs">(Unique)</span></label>
                                    <select id="input-camera" class="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-yellow-400 outline-none bg-white">
                                        <option value="">Default View...</option>
                                        <option value="macro lens, f/2.8, extreme close-up">Macro (Tiny Details)</option>
                                        <option value="wide angle lens, 16mm, fisheye">Fisheye / Wide</option>
                                        <option value="telephoto lens, 200mm, bokeh background">Telephoto (Portrait)</option>
                                        <option value="isometric view, orthographic camera">Isometric (3D Game)</option>
                                        <option value="drone shot, aerial view, top-down">Drone / Aerial</option>
                                        <option value="GoPro footage, first-person view">GoPro / POV</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-bold text-stone-700 mb-1">Materiality <span class="text-yellow-600 text-xs">(Unique)</span></label>
                                    <select id="input-material" class="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-yellow-400 outline-none bg-white">
                                        <option value="">Default Texture...</option>
                                        <option value="made of translucent glass and crystal">Glass & Crystal</option>
                                        <option value="knitted wool texture, fabric">Knitted / Wool</option>
                                        <option value="brushed aluminum, metallic surfaces">Brushed Metal</option>
                                        <option value="organic slime, wet biological texture">Organic / Biological</option>
                                        <option value="origami paper folded, papercraft">Papercraft</option>
                                        <option value="voxel art, lego bricks">Voxels / Lego</option>
                                        <option value="white bone texture, calcified">Bone</option>
                                    </select>
                                </div>
                            </div>

                             <!-- New Unique Fields Row 2 -->
                            <div>
                                <label class="block text-sm font-bold text-stone-700 mb-1">Renderer / Engine</label>
                                <select id="input-renderer" class="w-full p-2 border border-stone-300 rounded focus:ring-2 focus:ring-yellow-400 outline-none bg-white">
                                    <option value="">Select Engine...</option>
                                    <option value="Unreal Engine 5 render, 8k, ray tracing">Unreal Engine 5 (Game)</option>
                                    <option value="Octane Render, physically based rendering">Octane (Product)</option>
                                    <option value="Pixar style, Disney animation style">Pixar / Disney</option>
                                    <option value="vintage polaroid, film grain, light leaks">Vintage Polaroid</option>
                                    <option value="Adobe Illustrator style, vector graphics">Adobe Illustrator</option>
                                </select>
                            </div>
                        </div>

                        <!-- Right Column: Parameters & Output (5 cols) -->
                        <div class="lg:col-span-5 space-y-5 flex flex-col">
                            <h3 class="font-bold text-stone-400 text-xs uppercase tracking-wider border-b border-stone-100 pb-2">Technical Params</h3>

                            <div>
                                <label class="block text-sm font-bold text-stone-700 mb-1">Aspect Ratio</label>
                                <div class="grid grid-cols-3 gap-2">
                                    <button onclick="setAr('--ar 16:9')" class="ar-btn py-2 border rounded hover:bg-stone-50 text-xs font-bold active-ar bg-yellow-400 text-yellow-900 border-yellow-500">16:9</button>
                                    <button onclick="setAr('--ar 1:1')" class="ar-btn py-2 border rounded hover:bg-stone-50 text-xs font-bold">1:1</button>
                                    <button onclick="setAr('--ar 9:16')" class="ar-btn py-2 border rounded hover:bg-stone-50 text-xs font-bold">9:16</button>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-bold text-red-800 mb-1">Negative Prompt (Avoid)</label>
                                <input type="text" id="input-negative" class="w-full p-2 border border-red-200 bg-red-50 rounded focus:ring-2 focus:ring-red-400 outline-none placeholder-red-300 text-red-900" placeholder="e.g. blur, text, watermark, bad anatomy">
                            </div>

                            <div class="flex-1 bg-stone-900 rounded-lg p-6 flex flex-col justify-between relative mt-4 shadow-inner">
                                <div>
                                    <div class="flex justify-between items-center mb-4">
                                        <h3 class="text-stone-400 text-xs uppercase tracking-wider font-bold">Final Prompt</h3>
                                        <span class="text-xs text-stone-500 font-mono">Token Est: High</span>
                                    </div>
                                    <p id="final-output" class="font-mono text-yellow-300 text-sm md:text-base leading-relaxed break-words">
                                        [Subject] --ar 16:9
                                    </p>
                                </div>
                                <button onclick="copyBuilderPrompt()" class="mt-6 w-full bg-stone-700 hover:bg-stone-600 text-white py-3 rounded-lg font-bold transition flex items-center justify-center gap-2 group">
                                    <span>Copy to Clipboard</span>
                                    <span class="group-hover:translate-x-1 transition-transform">üìã</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = content;
            
            // Add listeners
            const inputs = ['input-subject', 'input-style', 'input-lighting', 'input-camera', 'input-material', 'input-renderer', 'input-negative'];
            inputs.forEach(id => {
                const el = document.getElementById(id);
                if(el) el.addEventListener('input', updateBuilderOutput);
            });
            updateBuilderOutput();
        }

        // --- Helper: Update Builder Output ---
        function setAr(val) {
            state.promptBuilder.ar = val;
            document.querySelectorAll('.ar-btn').forEach(btn => {
                btn.classList.remove('bg-yellow-400', 'text-yellow-900', 'border-yellow-500');
                if(btn.textContent === val.replace('--ar ', '')) {
                    btn.classList.add('bg-yellow-400', 'text-yellow-900', 'border-yellow-500');
                }
            });
            updateBuilderOutput();
        }

        function updateBuilderOutput() {
            const subj = document.getElementById('input-subject').value || '[Subject]';
            const style = document.getElementById('input-style').value;
            const light = document.getElementById('input-lighting').value;
            const cam = document.getElementById('input-camera').value;
            const mat = document.getElementById('input-material').value;
            const rend = document.getElementById('input-renderer').value;
            const neg = document.getElementById('input-negative').value;
            const ar = state.promptBuilder.ar;

            // Smart concatenation
            let parts = [subj];
            
            // Visuals
            if(mat) parts.push(mat);
            if(style) parts.push(style);
            
            // Technicals
            if(light) parts.push(light);
            if(cam) parts.push(cam);
            if(rend) parts.push(rend);
            
            // Parameters at the end
            let finalString = parts.join(', ');
            
            if(neg) finalString += ` --no ${neg}`;
            finalString += ` ${ar}`;

            document.getElementById('final-output').textContent = finalString;
        }

        // --- Domain Specific Builders ---
        function fillBuilderWithTech(keyword) {
            navTo('builder');
            setTimeout(() => {
                document.getElementById('input-subject').value = "Mechanical gear assembly";
                document.getElementById('input-style').value = "blueprint, white lines on blue";
                document.getElementById('input-camera').value = "isometric view, orthographic camera";
                updateBuilderOutput();
            }, 100);
        }

        function fillBuilderWithMedical(title) {
            const item = dataStore.medical.find(i => i.title === title);
            if(!item) return;

            navTo('builder');
            setTimeout(() => {
                document.getElementById('input-subject').value = "Human Heart Anatomy";
                
                if(title.includes('Netter')) {
                    document.getElementById('input-style').value = "medical illustration in the style of Frank H. Netter"; 
                    document.getElementById('input-renderer').value = "Pixar style, Disney animation style"; 
                    document.getElementById('input-lighting').value = "soft studio lighting";
                } else if (title.includes('MRI')) {
                    document.getElementById('input-style').value = "digital illustration, cel shaded";
                    document.getElementById('input-camera').value = "macro lens, f/2.8, extreme close-up";
                    document.getElementById('input-material').value = "made of translucent glass and crystal";
                } else if (title.includes('Microscopic')) {
                    document.getElementById('input-camera').value = "macro lens, f/2.8, extreme close-up";
                    document.getElementById('input-lighting').value = "bioluminescent glow";
                    document.getElementById('input-material').value = "organic slime, wet biological texture";
                } else {
                    document.getElementById('input-style').value = "flat vector design, minimalism";
                }
                updateBuilderOutput();
                
                // Visual feedback
                const output = document.getElementById('final-output');
                output.parentElement.classList.add('ring-2', 'ring-teal-400');
                setTimeout(() => output.parentElement.classList.remove('ring-2', 'ring-teal-400'), 500);

            }, 100);
        }

        function fillBuilderWithAnatomy(part) {
            const item = dataStore.anatomy.find(i => i.part === part);
            navTo('builder');
            setTimeout(() => {
                document.getElementById('input-subject').value = item.prompt;
                document.getElementById('input-style').value = "medical illustration in the style of Frank H. Netter";
                document.getElementById('input-lighting').value = "soft studio lighting";
                
                // Context specific texture
                if(part.includes('Skeletal')) {
                    document.getElementById('input-material').value = "white bone texture, calcified";
                } else if(part.includes('Muscular')) {
                    document.getElementById('input-material').value = "organic slime, wet biological texture"; // Approximating muscle
                }
                
                updateBuilderOutput();
            }, 100);
        }

        function fillBuilderWithInfo(title) {
            const item = dataStore.infographics.find(i => i.title === title);
            navTo('builder');
            setTimeout(() => {
                document.getElementById('input-subject').value = "Global Energy Consumption Statistics"; // Placeholder
                document.getElementById('input-style').value = item.style;
                document.getElementById('input-renderer').value = item.renderer;
                document.getElementById('input-camera').value = "isometric view, orthographic camera";
                updateBuilderOutput();
            }, 100);
        }

        function fillBuilderWithStyle(styleId) {
            const style = dataStore.styles.find(s => s.id === styleId);
            if (!style) return;

            navTo('builder');
            setTimeout(() => {
                document.getElementById('input-subject').value = "A portrait of a character"; // Generic starting subject
                
                // Map style ID to dropdown values
                let styleValue = "";
                let lightValue = "";
                let renderValue = "";

                switch(styleId) {
                    case 'cyberpunk':
                        styleValue = "cyberpunk city, high contrast";
                        lightValue = "neon volumetric lighting";
                        renderValue = "Unreal Engine 5 render, 8k, ray tracing";
                        break;
                    case 'oil':
                        styleValue = "oil painting, thick texture";
                        lightValue = "rembrandt lighting";
                        break;
                    case 'pencil':
                        styleValue = "graphite sketch, rough lines";
                        break;
                    case '3d':
                        styleValue = "3D render, octane render"; // Not in list, using closest or blank if needed, but 'low poly' is there. Let's map to existing or leave blank
                        renderValue = "Octane Render, physically based rendering";
                        break;
                    case 'watercolor':
                        styleValue = "watercolor painting, wet-on-wet";
                        lightValue = "natural diffuse light";
                        break;
                }

                if(styleValue) {
                     // Try to set, if value exists in dropdown it works, otherwise blank.
                     const option = document.querySelector(`#input-style option[value="${styleValue}"]`);
                     if(option) document.getElementById('input-style').value = styleValue;
                }
                if(lightValue) {
                     const option = document.querySelector(`#input-lighting option[value="${lightValue}"]`);
                     if(option) document.getElementById('input-lighting').value = lightValue;
                }
                if(renderValue) {
                     const option = document.querySelector(`#input-renderer option[value="${renderValue}"]`);
                     if(option) document.getElementById('input-renderer').value = renderValue;
                }

                updateBuilderOutput();
                
                // Visual feedback
                const output = document.getElementById('final-output');
                output.parentElement.classList.add('ring-2', 'ring-yellow-400');
                setTimeout(() => output.parentElement.classList.remove('ring-2', 'ring-yellow-400'), 500);
            }, 100);
        }

        function fillBuilderWithPhoto(name) {
            const item = dataStore.photography.find(i => i.name === name);
            navTo('builder');
            setTimeout(() => {
                document.getElementById('input-subject').value = "Portrait of a wanderer";
                document.getElementById('input-style').value = "cinematic shot, 35mm lens"; 
                
                // Intelligent slotting
                if(item.type === 'Lens') {
                     // Since we don't have separate Lens field in builder dropdowns exactly matching names, we might map to 'Camera'.
                     // Actually prompts in dataStore have e.g. '16mm wide angle lens...'.
                     // Let's see if we can match Camera & Lens dropdown values.
                     // Camera dropdown values: "macro lens...", "wide angle lens...", "telephoto lens..."
                     if(name.includes('Wide')) document.getElementById('input-camera').value = "wide angle lens, 16mm, fisheye";
                     if(name.includes('Portrait')) document.getElementById('input-camera').value = "telephoto lens, 200mm, bokeh background"; // Closest
                     if(name.includes('Macro')) document.getElementById('input-camera').value = "macro lens, f/2.8, extreme close-up";
                } 
                else if (item.type === 'Angle') {
                     if(name.includes('Drone')) document.getElementById('input-camera').value = "drone shot, aerial view, top-down";
                     // Others like Dutch Angle don't have direct mapping in dropdown, so we might append to subject or ignore for now as per simple logic
                }
                else if (item.type === 'Film') {
                    document.getElementById('input-renderer').value = "vintage polaroid, film grain, light leaks"; // Closest approximation
                }

                updateBuilderOutput();
                
                // Visual feedback
                const output = document.getElementById('final-output');
                output.parentElement.classList.add('ring-2', 'ring-yellow-400');
                setTimeout(() => output.parentElement.classList.remove('ring-2', 'ring-yellow-400'), 500);
            }, 100);
        }

        // --- Chart Functions ---

        function initAnatomyChart() {
            const ctx = document.getElementById('chart-anatomy').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Subject (Core)', 'Art Style', 'Lighting/Color', 'Parameters'],
                    datasets: [{
                        data: [45, 30, 15, 10],
                        backgroundColor: ['#EAB308', '#FDE047', '#D6D3D1', '#27272A'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        function initStyleChart(styleData) {
            const ctx = document.getElementById('style-radar-chart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Realism', 'Texture', 'Detail', 'Tech-Feel', 'Abstract'],
                    datasets: [{
                        label: styleData.name,
                        data: styleData.metrics,
                        fill: true,
                        backgroundColor: 'rgba(234, 179, 8, 0.2)',
                        borderColor: '#EAB308',
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#EAB308',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#EAB308'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: {
                        line: { borderWidth: 3 }
                    },
                    scales: {
                        r: {
                            angleLines: { color: '#E5E7EB' },
                            grid: { color: '#E5E7EB' },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        function initTechChart() {
            const ctx = document.getElementById('tech-bar-chart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Orthographic', 'Blueprint', 'Schematic', 'Diagram', 'Sketch'],
                    datasets: [{
                        label: 'Consistency Score (0-100)',
                        data: [95, 88, 75, 60, 40],
                        backgroundColor: [
                            '#1E3A8A', // Strongest
                            '#2563EB',
                            '#60A5FA',
                            '#93C5FD',
                            '#DBEAFE'  // Weakest
                        ],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { 
                            beginAtZero: true,
                            grid: { color: '#F3F4F6' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (ctx) => `Reliability: ${ctx.raw}%`
                            }
                        }
                    }
                }
            });
        }

        function initMedicalChart() {
            const ctx = document.getElementById('medical-chart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Netter/Atlas', 'MRI/X-Ray', 'Photo-Realism', 'Vector Line'],
                    datasets: [
                        {
                            label: 'Educational Clarity',
                            data: [95, 60, 40, 85],
                            backgroundColor: '#14B8A6' // Teal
                        },
                        {
                            label: 'Visual "Wow" Factor',
                            data: [60, 50, 90, 30],
                            backgroundColor: '#FDE047' // Yellow
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true },
                        x: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        function initPhotoChart() {
            const ctx = document.getElementById('photo-chart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['16mm', '35mm', '50mm', '85mm', '200mm'],
                    datasets: [{
                        label: 'Background Blur Intensity (Bokeh)',
                        data: [10, 30, 50, 85, 95],
                        borderColor: '#FDE047',
                        backgroundColor: 'rgba(253, 224, 71, 0.2)',
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: '#FFF'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { display: false },
                        x: { 
                            grid: { color: '#44403C' },
                            ticks: { color: '#A8A29E' }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                             backgroundColor: '#FFF',
                             titleColor: '#000',
                             bodyColor: '#000',
                             callbacks: {
                                 label: (context) => `Bokeh: ${context.parsed.y}%`
                             }
                        }
                    }
                }
            });
        }

        function getMaxAttribute(metrics) {
            const labels = ['Realism', 'Texture', 'Detail', 'Tech-Feel', 'Abstract'];
            const maxVal = Math.max(...metrics);
            return labels[metrics.indexOf(maxVal)];
        }

        // --- Utilities ---
        function copyText(elementId) {
            const text = document.getElementById(elementId).innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('Copied to clipboard!');
            });
        }

        function copyBuilderPrompt() {
            const text = document.getElementById('final-output').innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert('Prompt copied!');
            });
        }

    </script>
</body>
</html>